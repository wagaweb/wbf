/*! WabootFramework 20-11-2015 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={loadWebFonts:function(a){_.isEmpty(a)||WebFont.load({google:{families:a}})}}},{}],2:[function(a,b,c){b.exports={multipleFileUpload:a("./acf-fields/multiple-file-upload"),wcfGallery:a("./acf-fields/wcf-gallery")}},{"./acf-fields/multiple-file-upload":3,"./acf-fields/wcf-gallery":4}],3:[function(a,b,c){b.exports={init_interface:function(){function a(){c.append(d())}var b=jQuery,c=b(".mfu-files");if(c.length>0){var d=_.template(b("#FileUploadInput").html());0==c.children().length&&a(),b("a.add-attachment").on("click",function(b){b.preventDefault(),a()}),b("a.upload-attachment").on("click",function(a){a.preventDefault(),console.log("Click!")})}}}},{}],4:[function(a,b,c){b.exports={init_interface:function(){var a,b=jQuery;b("#upload-btn").click(function(c){return c.preventDefault(),a?void a.open():(a=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!0}),a.on("select",function(){var c=a.state().get("selection"),d=[];c.map(function(a){a=a.toJSON(),d.push(a.id),console.log(d),b.ajax(wbfData.ajaxurl,{data:{action:"wcf_get_thumbnail",id:a.id},dataType:"json",method:"POST"}).done(function(c,d,e){console.log(c);var f=JSON.stringify(c),g=JSON.parse(f),h=g.thumb,i=b(".containerImgGalleryAdmin").length;b("#imageContainer").append("<div class='containerImgGalleryAdmin'><img class='imgGalleryAdmin' src="+h+" data-id='"+a.id+"'><div class='deleteImg'><a class='acf-icon dark remove-attachment ' data-index='"+i+"' href='#' data-id='"+a.id+"'><i class='acf-sprite-delete'></i></a></div></div>"),b("#imageContainer").sortable("refresh")}).fail(function(a,b,c){console.log(c)}).always(function(a,b,c){console.log(c)})});var e=b("#imgId").val();console.log(e),"  "==e||""==e||" "==e?b("#imgId").val(d):b("#imgId").val(e+","+d)}),void a.open())}),b("#imageContainer").on("mouseover",".containerImgGalleryAdmin",function(){b(this).addClass("on")}),b("#imageContainer").on("click"," .deleteImg",function(a){a.preventDefault();var c=b("#imgId").val(),d=c.split(",").map(Number),e=b(this).children().attr("data-index"),f=[];console.log(d,e),b.each(d,function(a,c){console.log(a,e),a!=e&&f.push(b(c)[0])}),b(".containerImgGalleryAdmin.on").remove(),b("#imgId").val(f),b.each(b(".deleteImg"),function(a,c){b(this).children().attr("data-index",a)})}),b("#imageContainer").on("click",".imgGalleryAdmin",function(){b(".containerImgGalleryAdmin").hasClass("selected")&&b(".containerImgGalleryAdmin").removeClass("selected"),b("#imageContainer, .uploadContainer, .mainContainer").addClass("selected"),b(this).parent().addClass("selected"),b("#imageInfo").addClass("active"),b.ajax(wbfData.ajaxurl,{data:{action:"wcf_media_info",id:b(this).attr("data-id")},dataType:"json",method:"POST"}).done(function(a,c,d){b("#imageInfo #imgThumb, #imageInfo .body, #imageInfo .footer").addClass("active"),b("#imageInfo #imgThumb img").attr("src",a.thumb),b("#imageInfo #mainInfo .imgName").text(a.name),b("#imageInfo #mainInfo .upload").text(a.upload),b("#imageInfo #mainInfo .dimensions").text(a.size+" ("+a.filesize+")"),b(".title #imageTitle").val(a.title),b(".caption #imageCaption").val(a.caption),b(".alt #imageAlt").val(a.alt),b(".description #imageDescription").val(a.description)}).fail(function(a,b,c){console.log(c)}).always(function(a,b,c){console.log(c)})}),b("#imageInfo #closeBtn").on("click",function(a){a.preventDefault(),b(".mainContainer, #imageContainer, .uploadContainer, .containerImgGalleryAdmin").removeClass("selected"),b("#imageInfo, #imageInfo .body, #imageInfo .footer  ").removeClass("active")}),b("#imageInfo #updateBtn").on("click",function(a){a.preventDefault(),b("#imageInfo .spinner").addClass("is-active"),b(this).attr("disabled","disabled"),b.ajax(wbfData.ajaxurl,{data:{action:"wcf_update_media_info",id:b(".containerImgGalleryAdmin.selected .imgGalleryAdmin").attr("data-id"),title:b(".title #imageTitle").val(),caption:b(".caption #imageCaption").val(),alt:b(".alt #imageAlt").val(),description:b(".description #imageDescription").val()},dataType:"json",method:"POST"}).done(function(a,c,d){"true"==a.response&&(b("#imageInfo #updateBtn").removeAttr("disabled"),b("#imageInfo .spinner").removeClass("is-active"))}).fail(function(a,b,c){console.log(c)}).always(function(a,b,c){console.log(c)})}),b("#imageContainer").on("click",".containerImgGalleryAdmin.selected .imgGalleryAdmin",function(){b(".mainContainer, #imageContainer, .uploadContainer, .containerImgGalleryAdmin").removeClass("selected"),b("#imageInfo, #imageInfo .body, #imageInfo .footer  ").removeClass("active")}),b("#imageContainer").on("mouseout",".containerImgGalleryAdmin",function(){b(this).removeClass("on")}),b("#imageContainer").sortable({stop:function(a,c){var d=b(".imgGalleryAdmin");b("#imgId").val("");var e=[];b.each(d,function(a,c){e.push(b(c).attr("data-id"))}),b("#imgId").val(e)}}),b("#imageContainer").disableSelection()}}},{}],5:[function(a,b,c){b.exports={init_interface:function(){"use strict";var a=jQuery;a(".behavior-metabox-image").click(function(){a(this).parents(".behavior-images-options").find(".behavior-metabox-image").removeClass("behavior-metabox-image-selected"),a(this).addClass("behavior-metabox-image-selected")}),a(".behavior-metabox-image-default").click(function(){a(this).parent(".behavior-images-wrapper").find(".behavior-metabox-image").removeClass("behavior-metabox-image-selected")})}}},{}],6:[function(a,b,c){b.exports={init_interface:function(){"use strict";var a=jQuery,b=[],c=a("textarea.codemirror[data-lang]"),d=navigator.platform.toUpperCase().indexOf("MAC")>=0;setTimeout(function(){c.each(function(c){var e=a(this).closest(".group"),f=a("a#"+e.attr("id")+"-tab"),g=a(this).attr("data-lang"),h=a(this).codemirror({mode:{name:g,globalVars:!0},lineNumbers:!0,theme:"ambiance",extraKeys:function(){return d?{"Ctrl-F":"autocomplete"}:{"Ctrl-Space":"autocomplete"}}()});b.push(h),f.bind("click",function(){setTimeout(function(){h.refresh()},1e3)})})},1500)},init_jq_plugin:function(){jQuery.fn.codemirror=function(a){var b=jQuery,c=this,d=b.extend({mode:"javascript",lineNumbers:!1,runmode:!1},a);return d.runmode?this.each(function(){var a=b(this),c=[],e=[],f=0,g=function(a,b){"\n"==a?(c.push("<br>"),e.push("<pre>"+ ++f+"</pre>")):b?c.push('<span class="cm-'+CodeMirror.htmlEscape(b)+'">'+CodeMirror.htmlEscape(a)+"</span>"):c.push(CodeMirror.htmlEscape(a))};CodeMirror.runMode(a.val(),d.mode,g),b('<div class="CodeMirror">'+(d.lineNumbers?'<div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text">'+e.join("")+"</div></div>":"<!--gutter-->")+'<div class="CodeMirror-lines">'+(d.lineNumbers?'<div style="position: relative; margin-left: '+f.toString().length+'em;">':"<div>")+'<pre class="cm-s-default">'+c.join("")+"</pre></div></div></div>").insertAfter(a),a.hide()}):this.each(function(){c=CodeMirror.fromTextArea(this,d)}),c}}}},{}],7:[function(a,b,c){b.exports={init_interface:function(){"use strict";var a=jQuery;a(".nav-tab-wrapper a").on("click",function(){var b=a("#"+a(this).attr("data-show-comp-settings"));a("#componentframework-metabox .group").hide(),b.show()})}}},{}],8:[function(a,b,c){b.exports={init_interface:function(a){"use strict";var b=jQuery,c=a;b(".font-family-selector").on("change",function(){var a=b(this),d=b(this).siblings(".font-style-selector"),e=d.find("input:first").attr("name"),f=b(this).siblings(".font-charset-selector"),g=f.find("input:first").attr("name"),h=b(this).siblings(".font-category-selector"),i=b(this).siblings(".font-preview"),j=b.ajax({url:ajaxurl,type:"POST",data:{action:"gfontfetcher_getFontInfo",family:b(this).val()},dataType:"json",beforeSend:function(){a.attr("disabled","disabled"),d.addClass("disabled"),f.addClass("disabled")}});j.done(function(j,k,l){console.log(j),"webfonts#webfont"==j.kind&&c.loadWebFonts([a.val()]),i.find("p").css("font-family","'"+j.family+"',"+j.category),d.html(function(){var a="";return b.each(j.variants,function(){a+="<input name='"+e+"' type='checkbox' value='"+this+"' />"+this}),a}()),f.html(function(){var a="";return b.each(j.subsets,function(){a+="<input name='"+g+"' type='checkbox' value='"+this+"' />"+this}),a}()),h.val(j.category)}),j.fail(function(a,b,c){console.log(c)}),j.always(function(b,c,e){a.removeAttr("disabled"),d.removeClass("disabled"),f.removeClass("disabled")})})}}},{}],9:[function(a,b,c){jQuery(document).ready(function(b){var c=a("./views/acf-fields.js");_.each(c,function(a,b,c){_.isUndefined(a.init_interface)||a.init_interface()});var d=a("./views/component-page.js");d.init_interface();var e=a("./views/code-editor.js");if(e.init_jq_plugin(),e.init_interface(),!_.isUndefined(wbfData.wbfOfFonts)){var f=a("./controllers/font-selector.js"),g=a("./views/font-selector.js");f.loadWebFonts(wbfData.wbfOfFonts.families),g.init_interface(f)}var h=a("./views/behavior.js");h.init_interface()})},{"./controllers/font-selector.js":1,"./views/acf-fields.js":2,"./views/behavior.js":5,"./views/code-editor.js":6,"./views/component-page.js":7,"./views/font-selector.js":8}]},{},[9]);